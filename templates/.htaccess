<IfModule mod_rewrite.c>
RewriteEngine On

# Force HTTPS and WWW both
RewriteCond %{HTTPS} off [OR]
RewriteCond %{HTTP_HOST} !^www\. [NC]
RewriteRule ^(.*)$ https://www.%{HTTP_HOST}/$1 [L,R=301]

</IfModule>
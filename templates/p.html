<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<style>
    #popupBox * {
    font-family: Arial;
}

/* Row structure */
.row {
    display: flex;
    justify-content: space-between;
    margin-bottom: 6px;
}

/* Input box */
.box label {
    font-size: 11px;
    color: #555;
}
.box input,
.box select {
    width: 100%;
    padding: 5px 7px;
    font-size: 12px;
    border: 1px solid #ccc;
    border-radius: 4px;
}

/* Gender buttons */
.gender-box {
    display:flex;
    flex-direction: column;
    gap: 4px;
    margin-top: 14px;
}
.gbtn {
    padding:4px 0;
    width:34px;
    border:1px solid #007bff;
    color:#007bff;
    border-radius:4px;
    font-size:12px;
    background:white;
}
.gbtn.active {
    background:#007bff;
    color:white;
}

/* Upload box */
.upload-small {
    padding:6px;
    background:#007bff;
    color:white;
    border-radius:6px;
    display:flex;
    justify-content:space-between;
    align-items:center;
    cursor:pointer;
    position:relative;
}
.upload-small input {
    position:absolute;
    inset:0;
    opacity:0;
}

/* Submit */
#submitSmall {
    margin-top:8px;
    width:100%;
    padding:8px 0;
    background:#28a745;

    color:white;
    border-radius:6px;
    font-size:14px;
    cursor:pointer;
}

</style>
<body>
    <!-- ========================= NEW PERFECT POPUP ========================= -->

<div id="addPatientOverlay" style="
    position: fixed; inset:0;
    background: rgba(0,0,0,0.55);
    
    align-items:center;
    justify-content:center;
    z-index:99999;
">

    <div id="popupBox" style="
        width: 430px;
        height: 370px;
        background:white;
        border-radius:12px;
        padding:15px 18px;
        position:relative;
        overflow: hidden;
        box-shadow:0 4px 20px rgba(0,0,0,0.25);
    ">

        <h3 style="text-align:center; margin:0; font-size:18px;">
            ⟪ Patient Details ⟫
        </h3>

        <span onclick="closeAddPatient()" style="
            position:absolute; top:8px; right:12px;
            font-size:22px; cursor:pointer; color:#444;
        ">×</span>

        <form id="patientPopupForm" style="margin-top:10px; font-size:13px;">

            <!-- Patient ID -->
            <div class="row">
                <div class="box" style="width: 48%;">
                    <label>Patient ID</label>
                    <input type="text" id="pop_patientId">
                </div>
                <div class="box" style="width: 48%;">
                    <label>Age</label>
                    <input type="number" id="pop_age">
                </div>
            </div>

            <!-- Name + Gender -->
            <div class="row">
                <div class="box" style="width: 68%;">
                    <label>Name</label>
                    <input type="text" id="pop_patientName">
                </div>

                <div class="gender-box">
                    <button type="button" class="gbtn" data-gender="M">M</button>
                    <button type="button" class="gbtn" data-gender="F">F</button>
                    <input type="hidden" id="pop_gender">
                </div>
            </div>

            <!-- History -->
            <div class="box" style="width: 100%;">
                <label>History</label>
                <input type="text" id="pop_history">
            </div>

            <!-- Modality + Body Part -->
            <div class="row">
                <div class="box" style="width: 48%;">
                    <label>Modality</label>
                    <select id="pop_scanType">
                        <option>X-RAY</option>
                        <option>CT</option>
                        <option>MRI</option>
                        <option>MG</option>
                    </select>
                </div>

                <div class="box" style="width: 48%;">
                    <label>Body Part</label>
                    <input type="text" id="pop_bodyPart">
                </div>
            </div>

            <!-- Ref By + Upload -->
            <div class="row">
                <div class="box" style="width: 48%;">
                    <label>Referred By</label>
                    <input type="text" id="pop_refBy">
                </div>

                <div class="upload-small" style="width:48%;">
                    <span>Upload</span>
                    <i class="fas fa-upload"></i>
                    <input type="file" id="pop_uploadScan" accept="image/*">
                </div>
            </div>

            <input type="hidden" id="pop_finalImage">

            <button id="submitSmall" type="submit">
                Submit
            </button>
        </form>

    </div>
</div>

</body>
</html>